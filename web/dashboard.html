<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nosyt WHOP Automation Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .card-hover:hover { transform: translateY(-4px); transition: all 0.3s ease; }
        .pulse-dot { animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .status-online { color: #10b981; }
        .status-offline { color: #ef4444; }
    </style>
</head>
<body class="bg-gray-50" x-data="dashboard()">
    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <i class="fas fa-robot text-3xl"></i>
                    <div>
                        <h1 class="text-2xl font-bold">Nosyt WHOP Automation</h1>
                        <p class="text-blue-100">AI-Powered Digital Product Empire</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <div class="pulse-dot w-3 h-3 rounded-full" :class="systemStatus === 'online' ? 'bg-green-400' : 'bg-red-400'"></div>
                        <span x-text="systemStatus === 'online' ? 'System Online' : 'System Offline'"></span>
                    </div>
                    <button @click="refreshData()" class="bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-2 rounded-lg transition-all">
                        <i class="fas fa-sync-alt" :class="loading ? 'fa-spin' : ''"></i>
                        Refresh
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-6 py-8">
        <!-- Stats Cards -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <!-- Total Revenue -->
            <div class="bg-white rounded-lg shadow-md p-6 card-hover">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">Total Revenue</p>
                        <p class="text-3xl font-bold text-green-600" x-text="'$' + stats.totalRevenue.toLocaleString()"></p>
                        <p class="text-sm text-green-500" x-text="'+' + stats.revenueGrowth + '% this month'"></p>
                    </div>
                    <div class="bg-green-100 p-3 rounded-full">
                        <i class="fas fa-dollar-sign text-green-600 text-xl"></i>
                    </div>
                </div>
            </div>

            <!-- Total Products -->
            <div class="bg-white rounded-lg shadow-md p-6 card-hover">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">Active Products</p>
                        <p class="text-3xl font-bold text-blue-600" x-text="stats.totalProducts"></p>
                        <p class="text-sm text-blue-500" x-text="'+' + stats.newProductsToday + ' today'"></p>
                    </div>
                    <div class="bg-blue-100 p-3 rounded-full">
                        <i class="fas fa-box text-blue-600 text-xl"></i>
                    </div>
                </div>
            </div>

            <!-- Total Sales -->
            <div class="bg-white rounded-lg shadow-md p-6 card-hover">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">Total Sales</p>
                        <p class="text-3xl font-bold text-purple-600" x-text="stats.totalSales"></p>
                        <p class="text-sm text-purple-500" x-text="stats.avgOrderValue + ' avg order'"></p>
                    </div>
                    <div class="bg-purple-100 p-3 rounded-full">
                        <i class="fas fa-shopping-cart text-purple-600 text-xl"></i>
                    </div>
                </div>
            </div>

            <!-- Conversion Rate -->
            <div class="bg-white rounded-lg shadow-md p-6 card-hover">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">Conversion Rate</p>
                        <p class="text-3xl font-bold text-indigo-600" x-text="stats.conversionRate + '%'"></p>
                        <p class="text-sm text-indigo-500">Above average</p>
                    </div>
                    <div class="bg-indigo-100 p-3 rounded-full">
                        <i class="fas fa-chart-line text-indigo-600 text-xl"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- Charts and Recent Activity -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
            <!-- Revenue Chart -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-lg font-semibold mb-4">Revenue Trend (Last 30 Days)</h3>
                <canvas id="revenueChart" width="400" height="200"></canvas>
            </div>

            <!-- Product Performance -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-lg font-semibold mb-4">Top Performing Products</h3>
                <div class="space-y-4">
                    <template x-for="product in topProducts" :key="product.id">
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div class="flex-1">
                                <p class="font-medium" x-text="product.title"></p>
                                <p class="text-sm text-gray-500" x-text="product.category"></p>
                            </div>
                            <div class="text-right">
                                <p class="font-bold text-green-600" x-text="'$' + product.revenue"></p>
                                <p class="text-sm text-gray-500" x-text="product.sales + ' sales'"></p>
                            </div>
                        </div>
                    </template>
                </div>
            </div>
        </div>

        <!-- Automation Controls -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
            <!-- Automation Status -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-lg font-semibold mb-4">Automation Status</h3>
                <div class="space-y-4">
                    <div class="flex items-center justify-between">
                        <span>Auto Generation</span>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 rounded-full" :class="automation.generation ? 'bg-green-400' : 'bg-red-400'"></div>
                            <span x-text="automation.generation ? 'Active' : 'Inactive'" class="text-sm"></span>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <span>Auto Upload</span>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 rounded-full" :class="automation.upload ? 'bg-green-400' : 'bg-red-400'"></div>
                            <span x-text="automation.upload ? 'Active' : 'Inactive'" class="text-sm"></span>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <span>Price Optimization</span>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 rounded-full" :class="automation.pricing ? 'bg-green-400' : 'bg-red-400'"></div>
                            <span x-text="automation.pricing ? 'Active' : 'Inactive'" class="text-sm"></span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-lg font-semibold mb-4">Quick Actions</h3>
                <div class="space-y-3">
                    <button @click="generateProducts()" class="w-full bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg transition-colors">
                        <i class="fas fa-magic mr-2"></i>
                        Generate Products Now
                    </button>
                    <button @click="uploadProducts()" class="w-full bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-lg transition-colors">
                        <i class="fas fa-upload mr-2"></i>
                        Upload to WHOP
                    </button>
                    <button @click="optimizePrices()" class="w-full bg-purple-500 hover:bg-purple-600 text-white py-2 px-4 rounded-lg transition-colors">
                        <i class="fas fa-chart-line mr-2"></i>
                        Optimize Prices
                    </button>
                </div>
            </div>

            <!-- Recent Logs -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-lg font-semibold mb-4">Recent Activity</h3>
                <div class="space-y-2 max-h-64 overflow-y-auto">
                    <template x-for="log in recentLogs" :key="log.id">
                        <div class="flex items-start space-x-2 text-sm">
                            <div class="w-2 h-2 rounded-full mt-2" :class="log.type === 'success' ? 'bg-green-400' : log.type === 'error' ? 'bg-red-400' : 'bg-blue-400'"></div>
                            <div class="flex-1">
                                <p x-text="log.message"></p>
                                <p class="text-xs text-gray-500" x-text="log.timestamp"></p>
                            </div>
                        </div>
                    </template>
                </div>
            </div>
        </div>

        <!-- Settings Panel -->
        <div class="bg-white rounded-lg shadow-md p-6">
            <h3 class="text-lg font-semibold mb-4">Automation Settings</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Daily Product Target</label>
                    <input type="number" x-model="settings.dailyTarget" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Generation Interval (hours)</label>
                    <input type="number" x-model="settings.generationInterval" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Price Range ($)</label>
                    <div class="flex space-x-2">
                        <input type="number" x-model="settings.minPrice" placeholder="Min" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <input type="number" x-model="settings.maxPrice" placeholder="Max" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                </div>
                <div class="flex items-end">
                    <button @click="saveSettings()" class="w-full bg-gray-800 hover:bg-gray-900 text-white py-2 px-4 rounded-lg transition-colors">
                        <i class="fas fa-save mr-2"></i>
                        Save Settings
                    </button>
                </div>
            </div>
        </div>
    </main>

    <script>
        function dashboard() {
            return {
                loading: false,
                systemStatus: 'online',
                stats: {
                    totalRevenue: 12547,
                    revenueGrowth: 23.5,
                    totalProducts: 87,
                    newProductsToday: 12,
                    totalSales: 324,
                    avgOrderValue: '$38.75',
                    conversionRate: 4.2
                },
                automation: {
                    generation: true,
                    upload: true,
                    pricing: true
                },
                topProducts: [
                    { id: 1, title: 'Social Media Marketing Mastery', category: 'Business', revenue: 2847, sales: 73 },
                    { id: 2, title: 'Ultimate Productivity Planner', category: 'Productivity', revenue: 1923, sales: 89 },
                    { id: 3, title: 'Real Estate Investment Guide', category: 'Finance', revenue: 1654, sales: 41 },
                    { id: 4, title: 'Email Marketing Templates', category: 'Marketing', revenue: 1432, sales: 67 },
                    { id: 5, title: 'Dropshipping Empire Blueprint', category: 'Business', revenue: 1289, sales: 35 }
                ],
                recentLogs: [
                    { id: 1, type: 'success', message: 'Generated ebook: Social Media Success', timestamp: '2 minutes ago' },
                    { id: 2, type: 'success', message: 'Uploaded 3 products to WHOP', timestamp: '15 minutes ago' },
                    { id: 3, type: 'info', message: 'Price optimization completed', timestamp: '1 hour ago' },
                    { id: 4, type: 'success', message: 'New sale: $47 - Productivity Planner', timestamp: '2 hours ago' },
                    { id: 5, type: 'error', message: 'Upload failed: Network timeout', timestamp: '3 hours ago' }
                ],
                settings: {
                    dailyTarget: 10,
                    generationInterval: 6,
                    minPrice: 15,
                    maxPrice: 200
                },

                init() {
                    this.initChart();
                    this.refreshData();
                    setInterval(() => {
                        this.refreshData();
                    }, 60000); // Refresh every minute
                },

                initChart() {
                    const ctx = document.getElementById('revenueChart').getContext('2d');
                    new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: ['Day 1', 'Day 7', 'Day 14', 'Day 21', 'Day 30'],
                            datasets: [{
                                label: 'Revenue ($)',
                                data: [120, 450, 789, 1200, 1547],
                                borderColor: '#667eea',
                                backgroundColor: 'rgba(102, 126, 234, 0.1)',
                                borderWidth: 3,
                                fill: true,
                                tension: 0.4
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    grid: {
                                        color: 'rgba(0,0,0,0.1)'
                                    }
                                },
                                x: {
                                    grid: {
                                        display: false
                                    }
                                }
                            }
                        }
                    });
                },

                async refreshData() {
                    this.loading = true;
                    try {
                        // Simulate API call
                        await new Promise(resolve => setTimeout(resolve, 1000));
                        
                        // In real implementation, fetch from your backend API
                        // const response = await fetch('/api/dashboard/stats');
                        // this.stats = await response.json();
                        
                        this.systemStatus = 'online';
                    } catch (error) {
                        console.error('Failed to refresh data:', error);
                        this.systemStatus = 'offline';
                    } finally {
                        this.loading = false;
                    }
                },

                async generateProducts() {
                    try {
                        // Call backend API
                        // await fetch('/api/automation/generate', { method: 'POST' });
                        
                        this.recentLogs.unshift({
                            id: Date.now(),
                            type: 'info',
                            message: 'Product generation started...',
                            timestamp: 'Just now'
                        });
                        
                        alert('Product generation started! Check the activity log for updates.');
                    } catch (error) {
                        console.error('Failed to generate products:', error);
                    }
                },

                async uploadProducts() {
                    try {
                        // Call backend API
                        // await fetch('/api/automation/upload', { method: 'POST' });
                        
                        this.recentLogs.unshift({
                            id: Date.now(),
                            type: 'info',
                            message: 'Product upload started...',
                            timestamp: 'Just now'
                        });
                        
                        alert('Product upload started! Check the activity log for updates.');
                    } catch (error) {
                        console.error('Failed to upload products:', error);
                    }
                },

                async optimizePrices() {
                    try {
                        // Call backend API
                        // await fetch('/api/automation/optimize-prices', { method: 'POST' });
                        
                        this.recentLogs.unshift({
                            id: Date.now(),
                            type: 'info',
                            message: 'Price optimization started...',
                            timestamp: 'Just now'
                        });
                        
                        alert('Price optimization started! Check the activity log for updates.');
                    } catch (error) {
                        console.error('Failed to optimize prices:', error);
                    }
                },

                async saveSettings() {
                    try {
                        // Call backend API
                        // await fetch('/api/settings', {
                        //     method: 'POST',
                        //     headers: { 'Content-Type': 'application/json' },
                        //     body: JSON.stringify(this.settings)
                        // });
                        
                        alert('Settings saved successfully!');
                    } catch (error) {
                        console.error('Failed to save settings:', error);
                        alert('Failed to save settings. Please try again.');
                    }
                }
            }
        }
    </script>
</body>
</html>